(window.webpackJsonp=window.webpackJsonp||[]).push([[9,11],{201:function(e,t,a){e.exports=a.p+"static/media/logo.3bd6cd42.png"},202:function(e,t,a){"use strict";a.r(t),a.d(t,"UserLogin",function(){return h}),a.d(t,"NotLogin",function(){return f}),a.d(t,"DetectLogin",function(){return b}),a.d(t,"LoadLoop",function(){return p}),a.d(t,"LoadFail",function(){return g}),a.d(t,"NotResult",function(){return v});var n=a(46),s=a(47),c=a(50),r=a(48),o=a(71),i=a(49),l=a(0),u=a.n(l),m=a(20),d=a(22),h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(r.a)(t).call(this,e))).state={btnval:"\u767b\u5f55"},a.loginSubmit=a.loginSubmit.bind(Object(o.a)(a)),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"enterSumit",value:function(e){Object.is(e.keyCode,13)&&this.loginSubmit()}},{key:"loginSubmit",value:function(){var e=this,t=this.refs.userToken.value;if(!t)return this.$showMsg("\u4eb2,token\u4e0d\u80fd\u4e3a\u7a7a!");this.setState({btnval:"\u767b\u5f55\u4e2d..."}),this.$request({method:"post",url:"accesstoken",data:{accesstoken:t},success:function(a){a.success?(e.$showMsg("\u767b\u5f55\u6210\u529f!"),a.accesstoken=t,Object(d.c)("USER_INFO",a),e.props.history.push({pathname:"/user",search:"?name=".concat(a.loginname)})):(e.$showMsg("\u767b\u5f55\u5931\u8d25!"),e.setState({btnval:"\u767b\u5f55"}))},error:function(){e.$showMsg("\u767b\u5f55\u5931\u8d25!"),e.setState({btnval:"\u767b\u5f55"})}})}},{key:"render",value:function(){return u.a.createElement("div",{className:"user-login-form"},u.a.createElement("div",{className:"ipt-row"},u.a.createElement("input",{ref:"userToken",className:"bd-radius bd-none pdl",type:"text",name:"user-token",onKeyDown:this.enterSumit.bind(this),placeholder:"Access Token"})),u.a.createElement("div",{className:"ipt-row"},u.a.createElement("input",{className:"bd-radius bg-color ft-white bd-none",type:"submit",value:this.state.btnval,onClick:this.loginSubmit,name:"btn-submit"})))}}]),t}(u.a.Component),f=function(e){return u.a.createElement("div",{className:"not-login-wrap tc"},e.isLogo&&u.a.createElement("img",{className:"not-login-photo",src:a(201),alt:""}),u.a.createElement("h2",{"data-layout-align":"center center","data-layout":"layout"},"\u8fd8\u672a\u767b\u5f55\uff0c\u73b0\u5728\u5c31\u53bb",u.a.createElement(m.b,{className:"ft-color",to:"/user/login"},"\u767b\u5f55")))};f.defaultProps={isLogo:!0};var b=function(e){return function(t){function a(){return Object(n.a)(this,a),Object(c.a)(this,Object(r.a)(a).apply(this,arguments))}return Object(i.a)(a,t),Object(s.a)(a,[{key:"render",value:function(){return this.$getStorage()?u.a.createElement(e.realuser,this.props):u.a.createElement(f,null)}}]),a}(u.a.Component)},p=function(){return u.a.createElement("div",{className:"tc pdtb"},"\u73a9\u547d\u52a0\u8f7d\u4e2d...")},g=function(){return u.a.createElement("div",{className:"tc pdtb"},"\u52a0\u8f7d\u5931\u8d25!")},v=function(e){return u.a.createElement("div",{className:"tc pdtb"},e.text)};v.defaultProps={text:"\u6682\u65e0\u6570\u636e!"}},271:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a(46),c=a(47),r=a(50),o=a(48),i=a(49),l=(a(225),a(229)),u=a(0),m=a.n(u),d=a(20),h=a(202),f=a(22),b=a(11),p=a(38),g=a(83),v=l.a.TabPane,E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).userInfo=a.$getStorage(),a.state={info:{}},a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;this.$request({url:"messages",params:{mdrender:!1,accesstoken:this.userInfo.accesstoken},success:function(t){e.setState({info:t})}})}},{key:"render",value:function(){var e=this.state.info;return m.a.createElement("div",null,e.data?m.a.createElement(y,Object.assign({},this.props,{data:e.data,afresh:this.fetchData.bind(this)})):m.a.createElement(h.LoadLoop,null))}}]),t}(m.a.Component),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).userInfo=a.$getStorage(),a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"clearReadMsg",value:function(){var e=this;this.$request({method:"post",url:"message/mark_all",data:{accesstoken:this.userInfo.accesstoken},success:function(t){console.log(t),e.props.afresh(),e.props.actions.fetchData(),e.userInfo&&e.props.actions.fetchData(e.userInfo.accesstoken)}})}},{key:"render",value:function(){var e=this.props.data,t=[e.has_read_messages.length,e.hasnot_read_messages.length],a=t[0],n=t[1];return m.a.createElement("div",{className:"news-content container-bottom"},m.a.createElement(l.a,{defaultActiveKey:"1"},m.a.createElement(v,{tab:"\u672a\u8bfb\u6d88\u606f(".concat(n,")"),key:"1"},n?e.hasnot_read_messages.map(function(e,t){return m.a.createElement(k,{item:e,key:t})}):m.a.createElement(h.NotResult,{text:"\u6682\u65e0\u6d88\u606f!"})),m.a.createElement(v,{tab:"\u5df2\u8bfb\u6d88\u606f(".concat(a,")"),key:"2"},a?e.has_read_messages.map(function(e,t){return m.a.createElement(k,{item:e,key:t})}):m.a.createElement(h.NotResult,{text:"\u6682\u65e0\u6d88\u606f!"}))))}}]),t}(m.a.Component),k=function(e){var t=e.item;return m.a.createElement("div",{className:"article-item mgt"},m.a.createElement("div",{"data-layout":"layout","data-layout-align":"start start"},m.a.createElement("img",{className:"author-avatar mgr bd-radius",src:t.author.avatar_url,"data-layout-flex":"0",alt:""}),m.a.createElement("div",{className:"w100"},m.a.createElement("h3",{"data-ellipsis":!0,"data-layout":"layout","data-layout-align":"space-between center"},m.a.createElement("span",{className:"title-cnt","data-ellipsis":!0},t.author.loginname),Object(f.a)(t.create_at)),m.a.createElement("div",{className:"mgt"},m.a.createElement("div",null,"\u5728\u8bdd\u9898",m.a.createElement(d.b,{className:"ft-color",to:{pathname:"/index/article-details",search:"?id=".concat(t.topic.id),state:{id:t.topic.id}}},t.topic.title),"at"===t.type?"\u4e2d@\u4e86\u4f60!":"\u56de\u590d\u4e86\u4f60!",m.a.createElement("div",{className:"mgt markdown-body",dangerouslySetInnerHTML:{__html:t.reply.content}}))))))},O=Object(n.a)({},g.a);t.default=Object(p.b)(function(e){return{ReadNews:e.ReadNews}},function(e){return{actions:Object(b.b)(O,e)}})(Object(h.DetectLogin)({realuser:E}))}}]);
//# sourceMappingURL=9.643939f5.chunk.js.map